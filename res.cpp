#include "res.h"
#include <wx/mstream.h>
#include <algorithm>

unsigned char arrow_icon_png[] = {
137,  80,  78,  71,  13,  10,  26,  10,   0,   0,   0,  13,  73,  72,  68,  82,
  0,   0,   0, 100,   0,   0,   0, 100,   8,   6,   0,   0,   0, 112, 226, 149,
 84,   0,   0,   0,   1, 115,  82,  71,  66,   0, 174, 206,  28, 233,   0,   0,
  0,   4, 103,  65,  77,  65,   0,   0, 177, 143,  11, 252,  97,   5,   0,   0,
  0,   9, 112,  72,  89, 115,   0,   0,  14, 195,   0,   0,  14, 195,   1, 199,
111, 168, 100,   0,   0,   0,   7, 116,  73,  77,  69,   7, 217,   7,  19,  20,
 46,  44,  43, 153, 173,  69,   0,   0,   0,  26, 116,  69,  88, 116,  83, 111,
102, 116, 119,  97, 114, 101,   0,  80,  97, 105, 110, 116,  46,  78,  69,  84,
 32, 118,  51,  46,  53,  46,  49,  48,  48, 244, 114, 161,   0,   0,   4,  74,
 73,  68,  65,  84, 120,  94, 237, 157,  57, 136,  20,  65,  20, 134, 215,  99,
189, 197,  85,  60,  64,   4,  65,  68,  20,   3,  89,   3,   3, 197,   3,  17,
197, 251, 192,  35,  50,  16,   4, 163,   5,  77,  52,  48,  48,  48,  17,   3,
 65,  69,  52,  19,  60, 192,  80,  13, 188,  48,  49,  19, 197,  35,  87, 116,
140,  68,  17,  89, 241, 192,  91, 255,  31, 167, 113, 132,  29, 122, 230,  89,
175, 171, 186, 231,  95, 248, 163, 217, 247, 234, 213, 247,  87, 215, 118,  87,
117, 205, 118, 117, 233,  71,   4,  68,  64,   4,  68,  64,   4,  68,  64,   4,
 68,  64,   4,  68,  64,   4,  68,  64,   4,  68,  64,   4,  68,  64,   4,  68,
 64,   4,  68,  64,   4,  68,  64,   4,  68,  32, 143, 192,  52, 252, 194,  86,
104,  11, 180,  25, 218,   8, 109, 128, 214,  65, 107, 160, 213, 208,  42, 104,
 37, 180,   2,  90,  14,  45, 131,   6, 229,  37, 214, 231,  54,   2, 219,  16,
246,  19, 250,  14, 125, 131, 190,  64, 159, 161,  79, 208,   7, 232,  61, 244,
 14, 234, 135, 222,  66, 111, 160,  87,  80, 183, 173,  57,  69, 229,  17, 160,
 33, 191, 218,  20, 205, 147,  33, 121, 100, 141, 159, 203,  16,  35,  56, 175,
 48,  25, 226,  69, 214, 152,  87, 134,  24, 193, 121, 133, 201,  16,  47, 178,
198, 188,  50, 196,   8, 206,  43,  76, 134, 120, 145,  53, 230, 149,  33,  70,
112,  94,  97,  50, 196, 139, 172,  49, 175,  12,  49, 130, 243,  10, 147,  33,
 94, 100, 141, 121, 101, 136,  17, 156,  87, 152,  12, 241,  34, 107, 204,  43,
 67, 140, 224, 188, 194, 100, 136,  23,  89,  99,  94,  25,  98,   4, 231,  21,
 38,  67, 188, 200,  26, 243, 202,  16,  35,  56, 175,  48,  25, 226,  69, 214,
152,  87, 134,  24, 193, 121, 133, 201,  16,  47, 178, 198, 188,  50, 196,   8,
206,  43,  76, 134, 120, 145,  53, 230, 149,  33,  70, 112,  94,  97,  50, 196,
139, 172,  49, 175,  12,  49, 130, 243,  10, 147,  33,  94, 100, 141, 121, 101,
136,  17, 156,  87,  88, 234, 134, 244, 162, 227, 124,  67, 191,  99, 126,  82,
 55, 228,  40, 156, 184,  13, 205, 238,  20,  71,  82,  55, 228,   4, 140, 224,
219, 249,  60,   6, 113,   8,  26,  95, 117,  99, 202,  98,   8,  77, 225, 217,
149,  11, 208, 156,  42, 155,  82,  38,  67, 178, 115,  44, 253,  48, 100,  55,
 52, 161, 138, 198, 148, 209,  16,  26, 195,  83,  93, 151, 160,  41,  85,  51,
197,  98, 200,  15,  64,  24,  94,  16, 136, 236, 111,  72, 179,  83,  94,  53,
212, 177,   7,  26,  89,  80,  61, 238, 205,  88,  12,  33, 156,  73, 238, 149,
253, 105,  32, 207,  16, 214, 194, 115, 144, 199, 160, 169,   5, 213, 228, 218,
140, 213, 144,  77, 174,  85, 253,  77, 222, 138,  33, 217, 213, 243,   2,  97,
 60,  65,  60, 186, 160, 218,  92, 154, 225, 145, 104, 158, 194, 109, 247, 224,
231, 121, 196, 140, 113, 169, 232, 223, 164, 237,  24, 194,  62, 240, 132, 240,
113, 104,  84,   1, 181, 185,  52, 177,  22,  89,  63,  26,  12, 225, 209, 233,
147, 208,  76, 104,  28,  52, 214,  73, 103,  12, 181, 209, 152, 135,  16, 207,
222,  15, 117, 161, 230, 152, 116,  49, 114, 191,  52, 118, 154, 231, 218, 217,
241, 155, 208, 117,  39, 213, 140, 181, 101,  87, 203, 254, 250, 128, 113,  68,
 24,  54, 245,  44, 164, 123, 252,  31, 157, 110, 119, 170, 139, 241, 251,  15,
208, 191,  69, 208, 176, 176, 232, 124, 178, 113,  41, 226,  86, 197,  13, 225,
 32, 120,   6,  29, 128, 134, 248,  96,  12, 151, 149, 223,  89, 194,   5, 188,
 24,  35,  55,  70, 155,  55, 208, 215, 165,  80, 210, 223, 213, 194,  91, 197,
 24, 112,  98, 180, 201,  59, 202, 231, 208,  78, 104,  68, 184, 113,  29,  54,
 19, 159, 114, 185, 154,  26,   3,  80, 172,  54, 249, 125,  45, 188,  17, 153,
155, 234,  52, 198,  85, 212,  88, 112,  98, 182, 251, 168, 126, 181, 132,  29,
226,   1, 178, 241, 187, 176,  94, 119, 168,  41,  28,  16, 167, 161, 201,   1,
 56,   6,  75, 193, 187, 173, 171,  29, 106, 200,  87, 244, 251,  32, 148, 220,
114, 254, 124,  20, 197,  47,  45, 139,  57, 133,  20, 217,  54,  87, 173, 249,
 80, 187,  36, 216, 176,  14, 156, 136, 183, 130, 167,  32,  22,  90,  36, 152,
 24, 109, 113, 185, 136, 203,  50, 124, 129,  34, 233,  91,  96, 206, 163,  23,
 43, 108,  72, 182, 220, 195, 103, 145, 193, 129,   7, 180,  91, 186, 233, 200,
124, 175, 130, 166, 240,  25, 132,  87,  69,  41, 247, 228, 185,  53, 202,  77,
 31, 110, 254, 196, 152,  82,  66, 183, 121,  31, 253, 216, 238,  54, 132,  11,
 74, 204, 141,  30,  62, 209, 222,  41, 177,  41, 156, 162, 174,  64, 124, 175,
171,  52,  83,  84, 158, 191, 252, 163,  55,  15, 234, 131, 206,  66, 151, 161,
107, 144, 215, 146, 123,  99, 222, 154, 113,  48, 112, 122, 122,  10, 237, 128,
 74, 177, 202, 155, 103,  66, 179, 207, 185,  90, 202, 165,  22, 238,  22, 122,
109,  74,  53, 230, 181, 110,  80, 241, 153, 106,  33, 148, 244,  29, 148, 213,
132, 152, 113, 237, 110, 225,  62,  65, 177, 251, 170,  52,  61, 197, 132,  63,
 80, 219, 173,  26, 194,  41, 234,  46, 180,   0, 234,  78, 173,  19,  85, 170,
167,  21,  67, 184,   5, 189, 183,  62, 133,  86, 169, 239,  73, 246,  37, 207,
 16,  94,  21, 235, 161, 228, 119,   2, 147, 164, 107,  40, 170, 153,  33, 188,
 42, 184, 211, 153, 236,  38, 147, 161, 175, 165,   8,  25, 200,  16, 222, 206,
242, 223, 104, 148, 246, 221, 171,  82, 144, 111,  82, 100, 163,  33, 124, 193,
250,   8,  84, 185,  23, 172, 203, 100,  80, 102,   8, 111, 103, 119, 105, 138,
138, 111, 221,  97, 148, 112,  14, 154,  24, 191,  20,  85,  64,   2,  51, 160,
 30, 161,  16,   1,  17,  16,   1,  17,  16,   1,  17,  16,   1,  17,  16,   1,
 17,  16,   1,  17,  16,   1,  17,  16,   1,  17,  16,   1,  17,  16,   1,  17,
 16,   1,  17,  16,   1,  17,  72, 131, 192, 111,  46, 220,  65,  91, 115, 108,
  1,  35,   0,   0,   0,   0,  73,  69,  78,  68, 174,  66,  96, 130
};
size_t arrow_icon_png_in_bytes = sizeof(arrow_icon_png);

wxBitmap GetArrowIcon(int dim) {
	return MkScaledBitmap(MkImage(arrow_icon_png, arrow_icon_png_in_bytes), dim, dim);
}

wxBitmap MkScaledBitmap(const wxImage &img, int maxx, int maxy) {
	if(img.GetHeight()>maxy || img.GetWidth()>maxx) {
		double scalefactor=std::min((double) maxx / (double) img.GetWidth(), (double) maxy / (double) img.GetHeight());
		int newwidth = (double) img.GetWidth() * scalefactor;
		int newheight = (double) img.GetHeight() * scalefactor;
		return wxBitmap(img.Scale(std::lround(newwidth), std::lround(newheight), wxIMAGE_QUALITY_HIGH));
	}
	else return wxBitmap(img);
}

wxImage MkImage(unsigned char *data, size_t len) {
	wxMemoryInputStream memstream(data, len);
	wxImage img(memstream);
	return img;
}
